(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[287],{1381:function(e,t,n){"use strict";n.d(t,{Z:function(){return ValHome}});var r=n(7437),a=n(2926),i=n.n(a),l=n(4333),s=n.n(l),u=n(2265),o=n(7052),c=n(9656),d=n(8910),p=n(1951),f=n(1906);function prettyPrintTimestamp(e){let t=Math.floor(e),n=Math.floor(t/60),r=t%60,a="".concat(r<10?"0":"").concat(r),i="".concat(n<10?"0":"").concat(n);return"".concat(i,":").concat(a)}n(2278);let m=[.25,.5,.75,1,1.25,1.5,1.75];function GlobalAudioPlayer(e){var t;let{labelledBy:n,modalMode:a}=e,[i,l]=(0,u.useState)(!1),[s,c]=(0,u.useState)(1),[f,h]=(0,u.useState)(!1),[x,b]=(0,u.useState)(0),[v,g]=(0,u.useState)(0),y=(0,u.useRef)(null),A=(0,u.useRef)(null),j=(0,u.useRef)(null),w=(0,u.useRef)(null),S=(0,u.useRef)(null),_=(0,u.useRef)(!1),E=(0,u.useRef)(!1),k=(0,u.useRef)(null),R=(0,u.useRef)(null),{t:N}=(0,p.Q)(),{currentAudioData:C,audioPlaybackState:I,setAudioElementRef:L,setAudioStatus:T,audioElement:D}=(0,o.YC)(),P=I===o.AudioStatus.playing,U="".concat(f?N("inputs.restart_audio_aria"):N("inputs.".concat(P?"pause":"play","_audio_aria"))," ").concat(C.title),z=prettyPrintTimestamp(x),M=prettyPrintTimestamp(v),H=(0,u.useCallback)(e=>{let t=e.target,n=![j,w].some(e=>{let{current:n}=e;return n.contains(t)});n&&l(!1)},[]);return S.current=H,(0,u.useEffect)(()=>{let e=A.current;if(!D)return;let handleAudioMetaLoaded=()=>{e.max=D.duration.toString(),g(D.duration)},handleAudioTimeUpdate=()=>{e.value=D.currentTime.toString(),b(D.currentTime)},updateAudioPosition=()=>{D.currentTime=Number(e.value)};return D.readyState>=1?handleAudioMetaLoaded():D.addEventListener("loadedmetadata",handleAudioMetaLoaded),D.addEventListener("timeupdate",handleAudioTimeUpdate),e.addEventListener("input",updateAudioPosition),()=>{D.removeEventListener("loadedmetadata",handleAudioMetaLoaded),D.removeEventListener("timeupdate",handleAudioTimeUpdate),e.removeEventListener("input",updateAudioPosition)}},[D]),(0,u.useEffect)(()=>{a||D===y.current||L(y.current)},[L,D,a]),(0,u.useEffect)(()=>{if(D&&k.current!==C.snippetId){var e;k.current=C.snippetId,D.src=null!==(e=C.src)&&void 0!==e?e:"",E.current=!1,D.load()}},[D,C]),(0,u.useEffect)(()=>{D&&(R.current&&(clearTimeout(R.current),R.current=null),I===o.AudioStatus.playing?(D.currentTime===D.duration&&(D.currentTime=0),E.current&&D.play()):I===o.AudioStatus.paused?D.pause():I===o.AudioStatus.stopped?(D.pause(),D.currentTime=0):I===o.AudioStatus.complete&&(R.current=setTimeout(()=>{T(o.AudioStatus.stopped,C.snippetId)},3e3)))},[D,I,T,C]),(0,u.useEffect)(()=>{let unregisterDocumentClickawayListener=()=>{_.current&&(document.removeEventListener("mousedown",S.current),_.current=!1)};return i?_.current||(document.addEventListener("mousedown",S.current),_.current=!0):unregisterDocumentClickawayListener(),()=>{unregisterDocumentClickawayListener()}},[i]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-2xl w-full text-amber-900 dark:text-orange-300",children:[(0,r.jsx)("button",{onClick:()=>{let e=P?o.AudioStatus.paused:o.AudioStatus.playing;T(e,C.snippetId),h(!1)},onKeyDown:e=>{[" ","Enter"].includes(e.key)&&(e.preventDefault(),T(o.AudioStatus.paused,C.snippetId),h(!1))},"aria-label":U,title:U,className:"h-10 w-10 flex items-center justify-center shrink-0","data-testid":"audio-player-play-button",children:P?(0,r.jsx)(d.SUn,{"aria-hidden":"true"}):f?(0,r.jsx)(d.zq9,{"aria-hidden":"true"}):(0,r.jsx)(d.Hm_,{"aria-hidden":"true"})}),(0,r.jsx)("code",{className:"text-xs",title:"".concat(N("inputs.audio_time_elapsed_title")," ").concat(C.title),children:z}),(0,r.jsx)("input",{ref:A,type:"range",min:"0",step:"0.1",defaultValue:0,"aria-label":"".concat(N("inputs.audio_scrubber_aria")," ").concat(C.title),className:"c-audio-player__scrubber"}),(0,r.jsx)("code",{className:"text-xs",title:"".concat(N("inputs.audio_time_total_title")," ").concat(C.title),children:M}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{ref:w,"aria-label":"".concat(N("inputs.change_playback_speed_aria")," ").concat(C.title),title:"".concat(N("inputs.change_playback_speed_aria")," ").concat(C.title),"data-testid":"audio-player-speed-button",onClick:()=>l(!i),onKeyDown:e=>{[" ","Enter"].includes(e.key)&&(e.preventDefault(),l(!i))},className:"h-10 w-10 flex items-center justify-center shrink-0",children:(0,r.jsx)(d.JKp,{"aria-hidden":"true"})}),(0,r.jsx)("ul",{ref:j,role:"menu",className:"".concat(a?"-top-60":""," absolute -left-12 p-3 bg-amber-50 shadow-lg rounded-sm border-[1px] border-amber-900 dark:bg-stone-950 dark:border-orange-300"),hidden:!i,"aria-hidden":!i,"aria-label":"".concat(N("inputs.audio_speed_menu_label")," ").concat(C.title),"data-testid":"audio-player-speed-menu",onKeyDown:e=>{"Escape"===e.key&&l(!1)},children:m.map((e,t)=>(0,r.jsx)("li",{role:"menuitemradio","aria-checked":s===e,tabIndex:0,"aria-label":"".concat(N("inputs.audio_speed_item_label")," ").concat(e),className:"".concat(s===e?"font-bold":""," text-sm cursor-pointer my-2 hover:underline"),"data-testid":"audio-player-speed-option-".concat(t),onClick:()=>{D&&(D.playbackRate=e),c(e),l(!1)},onKeyDown:t=>{[" ","Enter"].includes(t.key)&&(t.preventDefault(),D&&(D.playbackRate=e),c(e),l(!1))},children:1===e?N("global.normal"):"".concat(e,"x")},"audio-speed-label-".concat(n,"-").concat(t)))})]}),(0,r.jsx)("button",{onClick:()=>{T(o.AudioStatus.stopped,C.snippetId),h(!1)},onKeyDown:e=>{[" ","Enter"].includes(e.key)&&(e.preventDefault(),T(o.AudioStatus.stopped,C.snippetId),h(!1))},"aria-label":"".concat(N("inputs.stop_audio_aria")," ").concat(C.title),title:"".concat(N("inputs.stop_audio_aria")," ").concat(C.title),className:"h-10 w-10 flex items-center justify-center shrink-0","data-testid":"audio-player-stop-button",children:(0,r.jsx)(d.YG8,{"aria-hidden":"true"})})]}),!a&&(0,r.jsx)("audio",{ref:y,controls:!0,src:null!==(t=C.src)&&void 0!==t?t:void 0,"aria-labelledby":n,hidden:!0,"data-testid":"audio-player-audio-element",onEnded:()=>{T(o.AudioStatus.complete,C.snippetId),h(!0)},onLoadStart:()=>{E.current=!1},onLoadedMetadata:()=>{E.current=!0,P&&(null==D||D.play())}})]})}let h=(0,u.lazy)(()=>n.e(804).then(n.bind(n,3804)));function AudioBanner(){var e,t;let[n,a]=(0,u.useState)(!1),[i,l]=(0,u.useState)(!0),[s,m]=(0,u.useState)(!1),[x,b]=(0,u.useState)(!1),v=(0,u.useRef)(0),g=(0,u.useRef)(null),{t:y}=(0,p.Q)(),{audioPlaybackState:A,currentAudioData:j}=(0,o.YC)(),w=(0,r.jsxs)("div",{className:"flex gap-2 items-center justify-center cursor-pointer text-amber-900 dark:text-orange-300",children:[(0,r.jsx)(d.Q7r,{"aria-hidden":!0}),(0,r.jsx)(c.U,{className:"text-xs",children:y("audio.view_transcript_md")})]}),S=(0,r.jsx)("div",{className:"w-max m-auto min-w-0",children:(0,r.jsx)(GlobalAudioPlayer,{labelledBy:"audio-banner-title",modalMode:!0})});return(0,u.useEffect)(()=>{let e=(0,f.Z)(()=>{let e=window.scrollY||document.documentElement.scrollTop,t=e>v.current;v.current=e,t&&n?(m(!0),g.current||(g.current=setTimeout(()=>{l(!0),g.current=null},500))):g.current&&(clearTimeout(g.current),g.current=null)},100);return e(),document.addEventListener("scroll",e),()=>{document.removeEventListener("scroll",e),g.current&&(clearTimeout(g.current),g.current=null)}},[n]),(0,u.useEffect)(()=>{A!==o.AudioStatus.stopped&&(m(!1),l(!1),b(!0)),a(A===o.AudioStatus.stopped)},[A]),(0,r.jsxs)("div",{role:"region",className:"".concat(s?"-top-40":"top-0"," ").concat(i?"hidden":"flex"," fixed right-0 left-0 h-fit py-2 px-4 bg-amber-50 shadow-sm z-50 items-center justify-center flex-col transition-all duration-300 dark:bg-stone-950"),"aria-hidden":i,"aria-label":y("audio.audio_banner_aria"),children:[(0,r.jsx)("h3",{id:"audio-banner-title",className:"font-header text-sm",children:j.title}),(0,r.jsx)("div",{className:"max-w-lg m-auto",children:(0,r.jsx)(GlobalAudioPlayer,{labelledBy:"audio-banner-title",modalMode:!1})}),(0,r.jsx)(u.Suspense,{fallback:null,children:x&&(0,r.jsx)(h,{trigger:w,description:"".concat(y("audio.open_transcript_modal")," ").concat(j.title),title:null!==(e=j.title)&&void 0!==e?e:"",subtitle:y("audio.audio_transcript"),footer:S,children:(0,r.jsx)(c.U,{children:null!==(t=j.transcript)&&void 0!==t?t:""})})})]})}var x=n(6691),b=n.n(x),v={src:"/_next/static/media/val--indian.259d2635.webp",height:1288,width:898,blurDataURL:"data:image/webp;base64,UklGRlIAAABXRUJQVlA4IEYAAADwAQCdASoGAAgAAkA4JaQAAv+5vcJOtAAAzj61zcDP1o8o+v27v5/8yj8un3anSs31KqZV26zrxLXVf9uO15vdKHb94wgA",blurWidth:6,blurHeight:8};function Intro(){let{t:e}=(0,p.Q)();return(0,r.jsxs)("div",{className:"relative w-full h-[100svh] lg:flex lg:flex-row-reverse lg:gap-8 lg:justify-between lg:items-center xl:max-w-[1440px] xl:m-auto xl:px-12",children:[(0,r.jsx)(b(),{src:v,alt:e("val.hero.hero_image_alt"),priority:!0,className:"h-full w-full object-cover lg:lg-[100svh] lg:w-auto xl:h-[80svh]"}),(0,r.jsx)("div",{className:"absolute bottom-12 left-0 right-0 bg-amber-50 dark:bg-stone-950 py-4 lg:static lg:w-full lg:flex lg:justify-center",children:(0,r.jsxs)("hgroup",{className:"lg:w-fit lg:pl-4",children:[(0,r.jsx)(c.U,{className:"font-header text-5xl text-amber-900 dark:text-orange-300 text-center lg:text-left",children:e("val.hero.hero_text_md")}),(0,r.jsx)(c.U,{className:"mb-4 font-sans dark:text-amber-50 text-center font-semibold lg:text-left",children:e("val.hero.subtitle_md")}),(0,r.jsx)(c.U,{className:"font-sans dark:text-amber-50 text-center lg:text-left",children:e("val.hero.author_text_md")}),(0,r.jsx)(c.U,{className:"font-sans dark:text-amber-50 text-center lg:text-left text-sm",children:e("val.hero.interview_date_md")})]})})]})}function SectionZero(){let{t:e}=(0,p.Q)();return(0,r.jsx)("div",{className:"w-full bg-white dark:bg-stone-900 p-4 pt-12",children:(0,r.jsx)("div",{className:"m-auto max-w-[1000px]",children:(0,r.jsx)(c.U,{className:"".concat("first-letter:text-amber-900 first-letter:text-7xl first-letter:float-left first-letter:font-bold first-letter:mr-3 dark:first-letter:text-orange-300"," ").concat("font-serif mb-4 dark:text-white"),children:e("val.section_0.paragraph_1_md")})})})}let g=(0,u.lazy)(()=>n.e(538).then(n.bind(n,538))),y=(0,u.lazy)(()=>n.e(646).then(n.bind(n,6646))),A=(0,u.lazy)(()=>n.e(390).then(n.bind(n,8390))),j=(0,u.lazy)(()=>n.e(69).then(n.bind(n,1069))),w=(0,u.lazy)(()=>n.e(238).then(n.bind(n,2238))),S=(0,u.lazy)(()=>Promise.all([n.e(142),n.e(261)]).then(n.bind(n,1261)));function ValHome(){let[e,t]=(0,u.useState)(!1),[n,a]=(0,u.useState)(!1),[l,c]=(0,u.useState)(!1),[d,p]=(0,u.useState)(!1),[f,m]=(0,u.useState)(!1),[h,x]=(0,u.useState)(!1),b=(0,u.useRef)(!1),v=(0,u.useRef)(null),_=(0,u.useRef)(null),E=(0,u.useRef)(null),k=(0,u.useRef)(null),R=(0,u.useRef)(null),N=(0,r.jsx)("div",{className:"w-full h-[200vh]"});return(0,u.useEffect)(()=>{let e=new IntersectionObserver(e=>{e.forEach(e=>{e.target===v.current?a(t=>t||e.isIntersecting):e.target===_.current?c(t=>t||e.isIntersecting):e.target===E.current?p(t=>t||e.isIntersecting):e.target===k.current?m(t=>t||e.isIntersecting):e.target===R.current&&x(t=>t||e.isIntersecting)})},{rootMargin:"1000px",threshold:.1});return[v,_,E,k,R].forEach(t=>{e.observe(t.current)}),()=>{e.disconnect()}},[]),(0,u.useEffect)(()=>{let scrollHandler=()=>{t(!0),document.removeEventListener("scroll",scrollHandler),b.current=!1};return document.addEventListener("scroll",scrollHandler),b.current=!0,()=>{b.current&&(document.removeEventListener("scroll",scrollHandler),b.current=!1)}},[]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"bg-amber-50 dark:bg-stone-950 w-[100svw] min-h-[100svh] max-w-full ".concat(i().variable," ").concat(s().variable),children:(0,r.jsxs)(o.nY,{children:[(0,r.jsx)(AudioBanner,{}),(0,r.jsxs)("article",{children:[(0,r.jsx)("section",{children:(0,r.jsx)(Intro,{})}),(0,r.jsx)("section",{children:(0,r.jsx)(SectionZero,{})}),[{ref:v,shouldRender:n,Component:g},{ref:_,shouldRender:l,Component:y},{ref:E,shouldRender:d,Component:A},{ref:k,shouldRender:f,Component:j},{ref:R,shouldRender:h,Component:w}].map((e,t)=>{let{ref:n,shouldRender:a,Component:i}=e;return(0,r.jsxs)("section",{ref:n,"aria-live":"polite",children:[!a&&N,(0,r.jsx)(u.Suspense,{fallback:N,children:a&&(0,r.jsx)(i,{})})]},"home-section-".concat(t))})]}),(0,r.jsx)(u.Suspense,{fallback:null,children:e&&(0,r.jsx)(S,{sectionOneRef:v,sectionTwoRef:_,sectionThreeRef:E,sectionFourRef:k,sectionFiveRef:R})})]})})})}},7052:function(e,t,n){"use strict";n.d(t,{AudioStatus:function(){return a},YC:function(){return useAudioContext},nY:function(){return AudioProvider}});var r,a,i=n(7437),l=n(2265);(r=a||(a={})).playing="playing",r.paused="paused",r.stopped="stopped",r.complete="complete";let s=(0,l.createContext)(null);function AudioProvider(e){let{children:t}=e,[n,r]=(0,l.useState)({src:null,snippetId:null,title:null,transcript:null}),[a,u]=(0,l.useState)("stopped"),[o,c]=(0,l.useState)(null),[d,p]=(0,l.useState)(null),[f,m]=(0,l.useState)(null),[h,x]=(0,l.useState)(null),b=(0,l.useRef)(!1),v=(0,l.useRef)(new Map);function playAudio(e,t,n,a){r({snippetId:e,src:t,title:n,transcript:a}),setAudioStatus("playing",e)}function pauseAudio(){if(!n.snippetId)throw Error("Cannot pause audio when no snippetId is set");setAudioStatus("paused",n.snippetId)}function setAudioStatus(e,t){if("playing"===e){if(!o)return;let e=null!=d?d:new window.AudioContext;d||p(e);let t=null!=f?f:e.createAnalyser();if(f||(t.fftSize=2048,t.minDecibels=-70,t.maxDecibels=-20,m(t)),!h&&!b.current){let n=e.createMediaElementSource(o);x(n),n.connect(t),b.current=!0}t.connect(e.destination)}u(e)}function setAudioElementRef(e){c(e)}function subscribe(e,t){let n=v.current.get(e);if(n){n.push(t);return}v.current.set(e,[t])}function unsubscribe(e,t){let n=v.current.get(e);if(!n)return;let r=n.indexOf(t);n.splice(r,1),0===n.length&&v.current.delete(e)}function notify(e,t){let n=v.current.get(e);n&&n.forEach(e=>{e(t)})}function notifyAllStopped(e){v.current.forEach((t,n)=>{n!==e&&t.forEach(e=>{e("stopped")})})}return(0,l.useEffect)(()=>{let{snippetId:e}=n;e&&(notifyAllStopped(e),notify(e,a))},[a,n]),(0,i.jsx)(s.Provider,{value:{currentAudioData:n,audioPlaybackState:a,setAudioElementRef,setAudioStatus,playAudio,pauseAudio,subscribe,unsubscribe,audioElement:o,audioAnalyser:f},children:t})}function useAudioContext(){let e=(0,l.useContext)(s);if(!e)throw Error("useAudioContext must be used within an AudioProvider");return e}},1951:function(e,t,n){"use strict";n.d(t,{Q:function(){return useI18n}});var r=n(2265),a=n(178);let findNestedValue=(e,t)=>{let n=t.reduce((e,t)=>{if(e&&"object"==typeof e)return e[t]},e);return"string"==typeof n?n:void 0},useI18n=()=>{var e;let{language:t,translations:n}=null!==(e=(0,r.useContext)(a.A))&&void 0!==e?e:{};if([t,n].some(e=>void 0===e))throw Error("useI18n must be used within a LanguageProvider");return{t:e=>{var t;let r=e.split("."),a=null!==(t=findNestedValue(n,r))&&void 0!==t?t:e;return a}}}},178:function(e,t,n){"use strict";n.d(t,{A:function(){return a}});var r=n(2265);let a=(0,r.createContext)(void 0)},4649:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});let r={english:"en",spanish:"es"}},1906:function(e,t,n){"use strict";function throttle(e,t){let n=0,r=null;return function(){for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];let s=Date.now();!n||s-n>=t?(n=s,e.apply(this,i)):(r&&clearTimeout(r),r=setTimeout(()=>{n=s,e.apply(this,i)},t-(s-n)))}}n.d(t,{Z:function(){return throttle}})},2278:function(){}}]);